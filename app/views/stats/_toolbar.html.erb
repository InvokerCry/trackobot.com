<%
  show_mode = local_assigns.fetch :show_mode, true
  show_timerange = local_assigns.fetch :show_timerange, true

  disable_arena_mode_selection = local_assigns.fetch :disable_arena_mode_selection, false # for deck stats
%>

<div class="btn-toolbar pull-right">
  <div class="btn-group btn-group-sm">
    <% if show_mode %>
      <button type="button" class="btn <%= @mode ? 'btn-primary' : 'btn-default' %> dropdown-toggle" data-toggle="dropdown">
        <%= (@mode && @mode.capitalize) || 'Mode' %> <span class="caret"></span>
      </button>
      <ul class="dropdown-menu" role="menu">
        <%= content_tag(:li, class: (@mode.nil? ? 'active' : '')) { link_to 'All Modes', params.except(:mode) } %>
        <%= content_tag(:li, class: (@mode == :ranked ? 'active' : '')) { link_to 'Ranked', params.merge(mode: :ranked) } %>
        <%= content_tag(:li, class: (@mode == :arena ? 'active' : '')) { link_to 'Arena', params.merge(mode: :arena) } unless disable_arena_mode_selection %>
        <%= content_tag(:li, class: (@mode == :casual ? 'active' : '')) { link_to 'Casual', params.merge(mode: :casual) } %>
        <%= content_tag(:li, class: (@mode == :friendly ? 'active' : '')) { link_to 'Friendly', params.merge(mode: :friendly) } %>
      </ul>
    <% end %>
  </div>
  <% if show_timerange %>
    <div class="btn-group btn-group-sm">
      <%= link_to 'All-time', params.except(:time_range), class: %w[btn btn-default] + (@time_range ? [] : ['active'])  %>
      <%= link_to 'Last 24 hours', params.merge(time_range: :last_24_hours), class: %w[btn btn-default] + (@time_range == :last_24_hours ? ['active'] : [])  %>
      <%= link_to 'Last 3 days', params.merge(time_range: :last_3_days), class: %w[btn btn-default] + (@time_range == :last_3_days ? ['active'] : [])  %>
      <%= link_to 'Current month', params.merge(time_range: :current_month), class: %w[btn btn-default] + (@time_range == :current_month ? ['active'] : []) %>
    </div>
  <% end %>
</div>
