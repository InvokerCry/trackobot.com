<h2> Class Statistics</h2>
<% if @as_hero %>
<p>
  <strong>As:</strong> <%= hero_label(@as_hero.name) %> <%= link_to icon('times'), params.except(:as_hero) %>
</p>
<% end %>
<% if @vs_hero %>
<p>
  <strong>Versus:</strong> <%= hero_label(@vs_hero.name) %> <%= link_to icon('times'), params.except(:vs_hero) %>
</p>
<% end %>

<% %i[as vs].each do |type| %>
  <table class="table table-hover table-condensed">
    <thead>
      <tr>
        <th>Class</th>
        <th class="text-center">Share</th>
        <th class="text-center">Win/Loss</th>
        <th class="text-center">Winrate</th>
      </tr>
    </thead>
    <tbody>

    <%
      total = @stats[:classes][type].inject(0) do |sum, (hero, stats)|
        sum + stats[:wins] + stats[:losses]
      end
    %>

    <% @stats[:classes][type].each do |hero, stats| %>
    <tr>
      <td><%= type %> <%= link_to hero_label(hero.name), params.merge("#{type}_hero" => hero.name.downcase) %></td>
      <td class="text-center"><%= percentage(stats[:wins] + stats[:losses], total) %></td>
      <td class="text-center"><%= stats[:wins] %>/<%= stats[:losses] %></td>
      <td class="text-center"><%= win_rate(stats[:wins], stats[:losses]) %></td>
    </tr>
    <% end %>
  </table>
<% end %>
